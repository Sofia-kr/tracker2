<Window x:Class="t.ChecksData"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:t" 
        Height="850" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5"
        Loaded="Window_Loaded">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Верхня панель -->
        <Border Grid.Row="0" 
               Background="#4A90E2" 
               Padding="25">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Кнопка назад -->
                <Button x:Name="btnBack" 
                       Content="←" 
                       FontSize="24" 
                       Width="50" 
                       Height="50" 
                       Background="Transparent" 
                       BorderBrush="Transparent"
                       Foreground="White"
                       Click="BtnClose_Click"
                       Margin="0,0,20,0"
                       ToolTip="Повернутися назад"/>

                <!-- Заголовок -->
                <TextBlock Grid.Column="1"
                          Text="ПЕРЕГЛЯД ЗАПИСІВ" 
                          FontSize="28" 
                          FontWeight="Bold" 
                          Foreground="White"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"/>

                <!-- Кнопки управління -->
                <StackPanel Grid.Column="2" Orientation="Horizontal"/>
            </Grid>
        </Border>

        <!-- Панель вибору типу -->
        <Border Grid.Row="1" 
               Background="#E6F2FF" 
               Padding="15" 
               Margin="30,10,30,10">
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center">
                <RadioButton x:Name="rbExpenses" 
                           Content="Витрати" 
                           GroupName="ChecksType"
                           IsChecked="True"
                           FontSize="16"
                           FontWeight="Bold"
                           Margin="15,0"
                           Padding="25,10"
                           Background="White"
                           BorderBrush="#4A90E2"
                           BorderThickness="2"
                           Checked="RbExpenses_Checked"/>
                <RadioButton x:Name="rbIncome" 
                           Content="Доходи" 
                           GroupName="ChecksType"
                           FontSize="16"
                           FontWeight="Bold"
                           Margin="15,0"
                           Padding="25,10"
                           Background="White"
                           BorderBrush="#4A90E2"
                           BorderThickness="2"
                           Checked="RbIncome_Checked"/>
                <RadioButton x:Name="rbSavings" 
                           Content="Заощадження" 
                           GroupName="ChecksType"
                           FontSize="16"
                           FontWeight="Bold"
                           Margin="15,0"
                           Padding="25,10"
                           Background="White"
                           BorderBrush="#4A90E2"
                           BorderThickness="2"
                           Checked="RbSavings_Checked"/>
            </StackPanel>
        </Border>

        <!-- Таблиця записів -->
        <Border Grid.Row="3" 
               Background="White" 
               Margin="30,0,30,20" 
               CornerRadius="10"
               Padding="20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Заголовок таблиці -->
                <Border Grid.Row="0" 
                       Background="#F5F5F5" 
                       CornerRadius="5" 
                       Padding="10,8" 
                       Margin="0,0,0,10">
                    <TextBlock x:Name="tblTableTitle" 
                              Text="ВИТРАТИ" 
                              FontSize="18" 
                              FontWeight="Bold" 
                              Foreground="#4A90E2"
                              HorizontalAlignment="Center"/>
                </Border>

                <!-- DataGrid з записами -->
                <DataGrid Grid.Row="1"
                         x:Name="dgChecks" 
                         AutoGenerateColumns="False"
                         CanUserAddRows="False"
                         CanUserDeleteRows="False"
                         CanUserReorderColumns="False"
                         CanUserResizeColumns="True"
                         CanUserResizeRows="False"
                         CanUserSortColumns="True"
                         SelectionMode="Single"
                         SelectionUnit="FullRow"
                         GridLinesVisibility="Horizontal"
                         RowHeight="70"
                         SelectionChanged="DgChecks_SelectionChanged"
                         CellEditEnding="DgChecks_CellEditEnding"
                         FontSize="14"
                         BorderThickness="0"
                         HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <!-- ID (прихована) -->
                        <DataGridTextColumn Header="ID" 
                                          Width="60" 
                                          Binding="{Binding Id}"
                                          Visibility="Collapsed"/>

                        <!-- Зображення категорії -->
                        <DataGridTemplateColumn Header="" Width="70">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="#F5F5F5" 
                                           CornerRadius="5" 
                                           Padding="5">
                                        <Image Source="{Binding CategoryImageFullPath}" 
                                               Width="40" 
                                               Height="40"
                                               Stretch="Uniform">
                                            <Image.Style>
                                                <Style TargetType="Image">
                                                    <Setter Property="Opacity" Value="1"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding CategoryImageFullPath}" Value="">
                                                            <Setter Property="Opacity" Value="0.3" />
                                                        </DataTrigger>
                                                        <Trigger Property="Source" Value="{x:Null}">
                                                            <Setter Property="Opacity" Value="0.3"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Image.Style>
                                        </Image>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- Категорія -->
                        <DataGridTextColumn Header="Категорія" 
                                          Width="150" 
                                          Binding="{Binding CategoryName}"
                                          IsReadOnly="True">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="#333333"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <!-- Коментар -->
                        <DataGridTemplateColumn Header="Коментар" Width="*">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock VerticalAlignment="Center" TextWrapping="Wrap">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Foreground" Value="#666666"/>
                                                <Setter Property="FontStyle" Value="Normal"/>
                                                <Setter Property="Text" Value="{Binding Comment}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Comment}" Value="">
                                                        <Setter Property="Foreground" Value="#AAAAAA"/>
                                                        <Setter Property="FontStyle" Value="Italic"/>
                                                        <Setter Property="Text" Value="(без коментаря)"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Text="{Binding Comment, UpdateSourceTrigger=PropertyChanged}" BorderThickness="1" BorderBrush="#DDDDDD" Background="White" VerticalAlignment="Center" Padding="5" MaxLength="255">
                                        <TextBox.Style>
                                            <Style TargetType="TextBox">
                                                <Setter Property="Foreground" Value="#333333"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Comment}" Value="">
                                                        <Setter Property="Foreground" Value="#AAAAAA"/>
                                                        <Setter Property="Text" Value="Введіть коментар..."/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBox.Style>
                                    </TextBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn>

                        <!-- Сума -->
                        <DataGridTemplateColumn Header="Сума" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding FormattedAmount}" 
                                              VerticalAlignment="Center"
                                              FontWeight="Bold"
                                              Foreground="{Binding AmountColor}"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                            <DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <TextBox Text="{Binding Amount, StringFormat=F2, UpdateSourceTrigger=PropertyChanged}"
                                             BorderThickness="1"
                                             BorderBrush="#DDDDDD"
                                             Background="White"
                                             VerticalAlignment="Center"
                                             FontWeight="Bold"
                                             HorizontalContentAlignment="Right"
                                             Padding="5"
                                             PreviewTextInput="AmountTextBox_PreviewTextInput"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellEditingTemplate>
                        </DataGridTemplateColumn>

                        <!-- Дата -->
                        <DataGridTextColumn Header="Дата" 
                                          Width="120" 
                                          Binding="{Binding FormattedDate}"
                                          IsReadOnly="True">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="Foreground" Value="#333333"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                    </DataGrid.Columns>

                    <DataGrid.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Setter Property="BorderBrush" Value="#E0E0E0"/>
                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                            <Setter Property="Padding" Value="10,0"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#E3F2FD"/>
                                    <Setter Property="BorderBrush" Value="#E3F2FD"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.CellStyle>

                    <DataGrid.RowStyle>
                        <Style TargetType="DataGridRow">
                            <Setter Property="Background" Value="White"/>
                            <Setter Property="BorderBrush" Value="#E0E0E0"/>
                            <Setter Property="BorderThickness" Value="0,0,0,1"/>
                            <Style.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter Property="Background" Value="#E3F2FD"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#F5F5F5"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </DataGrid.RowStyle>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Нижня панель кнопок -->
        <Border Grid.Row="4" 
               Background="#EEEEEE" 
               Padding="25">
            <StackPanel x:Name="pnlButtons" 
                       Orientation="Horizontal" 
                       HorizontalAlignment="Center">
                <Button x:Name="btnDelete" 
                       Content="🗑️ Видалити запис" 
                       Width="200" 
                       Height="45" 
                       Margin="10" 
                       Background="#E74C3C" 
                       Foreground="White" 
                       FontWeight="Bold"
                       FontSize="15"
                       Visibility="Collapsed"
                       Click="BtnDelete_Click"
                       BorderThickness="0"
                       BorderBrush="#C0392B">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="#ECF0F1"/>
                                    <Setter Property="Foreground" Value="#BDC3C7"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <Button x:Name="btnClose" 
                       Content="Закрити" 
                       Width="150" 
                       Height="45" 
                       Margin="10" 
                       Background="#95A5A6" 
                       Foreground="White" 
                       FontWeight="Bold"
                       FontSize="15"
                       Click="BtnClose_Click"
                       BorderThickness="0"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>